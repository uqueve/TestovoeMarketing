# Парсер поисковой выдачи Яндекса

Модуль для Django, который получает данные из поисковой выдачи Яндекса через сервис XMLRiver, парсит результаты и сохраняет их в базе данных.

## Функциональность

- Получение сырой страницы Яндекса через сервис XMLRiver
- Парсинг поисковой выдачи с извлечением заголовка, типа (реклама, органика) и ссылки для каждой позиции
- Сохранение данных в базе данных
- Запуск парсинга вручную через веб-интерфейс
- Запуск парсинга по расписанию с помощью Celery

## Требования

- Python 3.12+
- Django 5.1+
- Celery 5.3+
- Requests
- redis 5.2+
- lxml 5.3+

## Установка и запуск

1. Клонируйте репозиторий:
```bash
git clone https://github.com/uqueve/TestovoeMarketing.git
```

2. Установите Docker и Docker Compose
3. Заполните `.env`:

4. Выполните следующую команду для запуска всех сервисов:
```bash
docker-compose up --build -d
```

Сервисы:
- **web**: Django приложение на порту 8000
- **redis**: Redis сервер
- **celery**: Celery worker для выполнения задач
- **celery-beat**: Celery Beat для планирования задач
- **flower**: Celery Flower для мониторинга задач на порту 5555
```

## Использование

### Веб-интерфейс

1. Откройте http://127.0.0.1:8000/ в браузере
2. Используйте форму поиска для выполнения запросов
3. Для запуска задачи Celery вручную перейдите по адресу http://127.0.0.1:8000/run-task/

## Структура проекта

Проект реализован с использованием принципов чистой архитектуры:

- `domain/` - бизнес-логика приложения
  - `entities/` - бизнес-сущности
  - `repositories/` - интерфейсы репозиториев
  - `use_cases/` - сценарии
- `data/` - слой данных
  - `datasources/` - источники данных
  - `repositories/` - реализации репозиториев
- `presentation/` - слой представления
  - `views.py` - представления
- `templates/` - шаблоны HTML
- `models.py` - модели
- `tasks.py` - задачи Celery 
