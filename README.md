# Парсер поисковой выдачи Яндекса

Модуль для Django, который получает данные из поисковой выдачи Яндекса через сервис XMLRiver, парсит результаты и сохраняет их в базе данных.

## Функциональность

- Получение сырой страницы Яндекса через сервис XMLRiver
- Парсинг поисковой выдачи с извлечением заголовка, типа (реклама, органика) и ссылки для каждой позиции
- Сохранение данных в базе данных
- Запуск парсинга вручную через веб-интерфейс
- Запуск парсинга по расписанию с помощью Celery

## Требования

- Python 3.12+
- Django 5.1+
- Celery 5.3+
- Requests

## Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/uqueve/TestovoeMarketing.git
```

2. Создайте и активируйте виртуальное окружение:
```bash
python -m venv venv
source venv/bin/activate  # для Linux/Mac
venv\Scripts\activate  # для Windows
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```
Установите redis

4. Настройте базу данных:
```bash
python manage.py migrate
```

5. Создайте суперпользователя (опционально):
```bash
python manage.py createsuperuser
```

6. Настройте API ключ XMLRiver:
   - Откройте файл `.env`
   - Заполните user id и API ключ для XMLRiver 

## Запуск

### Запуск веб-сервера

```bash
python manage.py runserver
```

После запуска веб-сервер будет доступен по адресу http://127.0.0.1:8000/

### Запуск Celery для выполнения задач

```bash
celery -A yandex_parser worker -l info
```

## Использование

### Веб-интерфейс

1. Откройте http://127.0.0.1:8000/ в браузере
2. Используйте форму поиска для выполнения запросов
3. Для запуска задачи Celery вручную перейдите по адресу http://127.0.0.1:8000/run-task/

## Структура проекта

Проект реализован с использованием принципов чистой архитектуры:

- `domain/` - бизнес-логика приложения
  - `entities/` - бизнес-сущности
  - `repositories/` - интерфейсы репозиториев
  - `use_cases/` - сценарии
- `data/` - слой данных
  - `datasources/` - источники данных
  - `repositories/` - реализации репозиториев
- `presentation/` - слой представления
  - `views.py` - представления
- `templates/` - шаблоны HTML
- `models.py` - модели
- `tasks.py` - задачи Celery 
